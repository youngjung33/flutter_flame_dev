# ğŸ® Tetris Game

Flutterì™€ Flame ì—”ì§„ì„ ì‚¬ìš©í•˜ì—¬ ê°œë°œí•œ í´ë˜ì‹ í…ŒíŠ¸ë¦¬ìŠ¤ ê²Œì„ì…ë‹ˆë‹¤. í´ë¦° ì•„í‚¤í…ì²˜ 3ê³„ì¸µ êµ¬ì¡°ë¡œ ì„¤ê³„ë˜ì–´ í™•ì¥ ê°€ëŠ¥í•˜ê³  ìœ ì§€ë³´ìˆ˜ê°€ ìš©ì´í•©ë‹ˆë‹¤.

## ğŸ“‹ ëª©ì°¨

- [ì£¼ìš” ê¸°ëŠ¥](#ì£¼ìš”-ê¸°ëŠ¥)
- [ê¸°ìˆ  ìŠ¤íƒ](#ê¸°ìˆ -ìŠ¤íƒ)
- [ì•„í‚¤í…ì²˜](#ì•„í‚¤í…ì²˜)
- [í”„ë¡œì íŠ¸ êµ¬ì¡°](#í”„ë¡œì íŠ¸-êµ¬ì¡°)
- [ì„¤ì¹˜ ë° ì‹¤í–‰](#ì„¤ì¹˜-ë°-ì‹¤í–‰)
- [í…ŒìŠ¤íŠ¸](#í…ŒìŠ¤íŠ¸)
- [ê²Œì„ í”Œë ˆì´](#ê²Œì„-í”Œë ˆì´)
- [ê°œë°œ ê°€ì´ë“œ](#ê°œë°œ-ê°€ì´ë“œ)

## âœ¨ ì£¼ìš” ê¸°ëŠ¥

### ê²Œì„ ê¸°ëŠ¥
- âœ… 7ê°€ì§€ í…ŒíŠ¸ë¡œë¯¸ë…¸ (I, O, T, S, Z, J, L)
- âœ… ë¸”ë¡ ì´ë™, íšŒì „, ë‚™í•˜
- âœ… ë¼ì¸ í´ë¦¬ì–´ ë° ì ìˆ˜ ê³„ì‚°
- âœ… ë ˆë²¨ ì‹œìŠ¤í…œ (10ì¤„ë§ˆë‹¤ ë ˆë²¨ ì—…, ì†ë„ ì¦ê°€)
- âœ… ë‹¤ìŒ ë¸”ë¡ ë¯¸ë¦¬ë³´ê¸°
- âœ… ê²Œì„ ì˜¤ë²„ ì²˜ë¦¬
- âœ… ì¼ì‹œì •ì§€ ê¸°ëŠ¥

### ë°ì´í„° ê´€ë¦¬
- âœ… ë¡œì»¬ DB ì €ì¥ (Hive)
- âœ… ìµœê³  ì ìˆ˜ ì €ì¥
- âœ… ê²Œì„ ìƒíƒœ ì €ì¥/ë¡œë“œ

### í”Œë«í¼ ì§€ì›
- âœ… ëª¨ë°”ì¼ (iOS, Android)
- âœ… ë°ìŠ¤í¬í†± (Windows, macOS, Linux)
- âœ… ì›¹ (Web)

### ì…ë ¥ ì§€ì›
- âœ… í‚¤ë³´ë“œ ì…ë ¥ (ë°ìŠ¤í¬í†±)
- âœ… í„°ì¹˜ ì…ë ¥ (ëª¨ë°”ì¼)
- âœ… í™”ë©´ ì»¨íŠ¸ë¡¤ ë²„íŠ¼

## ğŸ›  ê¸°ìˆ  ìŠ¤íƒ

- **Flutter**: í¬ë¡œìŠ¤ í”Œë«í¼ í”„ë ˆì„ì›Œí¬
- **Flame**: 2D ê²Œì„ ì—”ì§„
- **Hive**: ë¡œì»¬ NoSQL ë°ì´í„°ë² ì´ìŠ¤
- **GetIt**: ì˜ì¡´ì„± ì£¼ì…
- **Equatable**: ê°ì²´ ë¹„êµ ìœ í‹¸ë¦¬í‹°

## ğŸ— ì•„í‚¤í…ì²˜

ì´ í”„ë¡œì íŠ¸ëŠ” **í´ë¦° ì•„í‚¤í…ì²˜ 3ê³„ì¸µ êµ¬ì¡°**ë¥¼ ë”°ë¦…ë‹ˆë‹¤.

### ê³„ì¸µ êµ¬ì¡°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Presentation Layer                â”‚
â”‚   (UI, Game, Components, Managers)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Domain Layer                      â”‚
â”‚   (Entities, Use Cases,            â”‚
â”‚    Repository Interfaces)           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Data Layer                        â”‚
â”‚   (Models, DataSources,             â”‚
â”‚    Repository Implementations)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ê³„ì¸µë³„ ì—­í• 

#### 1. Domain Layer (ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§)
- **Entities**: ê²Œì„ì˜ í•µì‹¬ ë°ì´í„° êµ¬ì¡°
  - `GameScore`: ì ìˆ˜ ì •ë³´
  - `GameState`: ê²Œì„ ìƒíƒœ
  - `TetrominoType`: í…ŒíŠ¸ë¡œë¯¸ë…¸ íƒ€ì…

- **Repository Interfaces**: ë°ì´í„° ì ‘ê·¼ ì¶”ìƒí™”
  - `GameRepository`: ê²Œì„ ë°ì´í„° ì €ì¥/ë¡œë“œ ì¸í„°í˜ì´ìŠ¤

- **Use Cases**: ë‹¨ì¼ ì±…ì„ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
  - `SaveGameScore`: ì ìˆ˜ ì €ì¥
  - `GetHighScore`: ìµœê³  ì ìˆ˜ ì¡°íšŒ
  - `SaveGameState`: ê²Œì„ ìƒíƒœ ì €ì¥
  - `LoadGameState`: ê²Œì„ ìƒíƒœ ë¡œë“œ

#### 2. Data Layer (ë°ì´í„° ì†ŒìŠ¤)
- **Models**: Hive ë°ì´í„° ëª¨ë¸
  - `GameScoreModel`: ì ìˆ˜ ë°ì´í„° ëª¨ë¸
  - `GameStateModel`: ê²Œì„ ìƒíƒœ ë°ì´í„° ëª¨ë¸

- **Data Sources**: ë¡œì»¬ DB ì ‘ê·¼
  - `GameLocalDataSource`: Hiveë¥¼ í†µí•œ ë°ì´í„° ì €ì¥/ë¡œë“œ

- **Repository Implementations**: Repository ì¸í„°í˜ì´ìŠ¤ êµ¬í˜„
  - `GameRepositoryImpl`: ì‹¤ì œ ë°ì´í„° ì²˜ë¦¬

#### 3. Presentation Layer (UI ë° ê²Œì„ ë¡œì§)
- **Game**: Flame ê²Œì„ ì—”ì§„
  - `TetrisGame`: ë©”ì¸ ê²Œì„ í´ë˜ìŠ¤

- **Components**: ê²Œì„ ì»´í¬ë„ŒíŠ¸
  - `BoardComponent`: ê²Œì„ ë³´ë“œ ë Œë”ë§
  - `NextPieceComponent`: ë‹¤ìŒ ë¸”ë¡ ë¯¸ë¦¬ë³´ê¸°

- **Managers**: ê²Œì„ ìƒíƒœ ê´€ë¦¬
  - `GameStateManager`: ê²Œì„ ë¡œì§ ë° ìƒíƒœ ê´€ë¦¬

- **Widgets**: Flutter UI ìœ„ì ¯
  - `GameHUD`: ì ìˆ˜, ë ˆë²¨ í‘œì‹œ
  - `GameControls`: ê²Œì„ ì»¨íŠ¸ë¡¤ ë²„íŠ¼

## ğŸ“ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
lib/
â”œâ”€â”€ main.dart                          # ì•± ì§„ì…ì 
â”œâ”€â”€ core/
â”‚   â”œâ”€â”€ constants/
â”‚   â”‚   â””â”€â”€ tetromino_patterns.dart   # í…ŒíŠ¸ë¡œë¯¸ë…¸ íŒ¨í„´ ì •ì˜
â”‚   â””â”€â”€ di/
â”‚       â””â”€â”€ service_locator.dart      # ì˜ì¡´ì„± ì£¼ì… ì„¤ì •
â”œâ”€â”€ data/
â”‚   â”œâ”€â”€ datasources/
â”‚   â”‚   â””â”€â”€ game_local_datasource.dart
â”‚   â”œâ”€â”€ models/
â”‚   â”‚   â”œâ”€â”€ game_score_model.dart
â”‚   â”‚   â””â”€â”€ game_state_model.dart
â”‚   â””â”€â”€ repositories/
â”‚       â””â”€â”€ game_repository_impl.dart
â”œâ”€â”€ domain/
â”‚   â”œâ”€â”€ entities/
â”‚   â”‚   â”œâ”€â”€ game_score.dart
â”‚   â”‚   â”œâ”€â”€ game_state.dart
â”‚   â”‚   â””â”€â”€ tetromino_type.dart
â”‚   â”œâ”€â”€ repositories/
â”‚   â”‚   â””â”€â”€ game_repository.dart
â”‚   â””â”€â”€ usecases/
â”‚       â”œâ”€â”€ get_high_score.dart
â”‚       â”œâ”€â”€ load_game_state.dart
â”‚       â”œâ”€â”€ save_game_score.dart
â”‚       â””â”€â”€ save_game_state.dart
â””â”€â”€ presentation/
    â”œâ”€â”€ components/
    â”‚   â”œâ”€â”€ board_component.dart
    â”‚   â””â”€â”€ next_piece_component.dart
    â”œâ”€â”€ game/
    â”‚   â””â”€â”€ tetris_game.dart
    â”œâ”€â”€ managers/
    â”‚   â””â”€â”€ game_state_manager.dart
    â””â”€â”€ widgets/
        â”œâ”€â”€ game_controls.dart
        â”œâ”€â”€ game_hud.dart
        â””â”€â”€ next_piece_hud.dart
```

## ğŸš€ ì„¤ì¹˜ ë° ì‹¤í–‰

### ì‚¬ì „ ìš”êµ¬ì‚¬í•­

- Flutter SDK (3.10.4 ì´ìƒ)
- Dart SDK
- ê°œë°œ í™˜ê²½ (Android Studio, VS Code ë“±)

### ì„¤ì¹˜

1. ì €ì¥ì†Œ í´ë¡ 
```bash
git clone <repository-url>
cd flutter_flame_dev
```

2. ì˜ì¡´ì„± ì„¤ì¹˜
```bash
flutter pub get
```

3. Hive ì½”ë“œ ìƒì„±
```bash
flutter pub run build_runner build --delete-conflicting-outputs
```

### ì‹¤í–‰

#### ëª¨ë°”ì¼
```bash
# iOS
flutter run -d ios

# Android
flutter run -d android
```

#### ë°ìŠ¤í¬í†±
```bash
# macOS
flutter run -d macos

# Windows
flutter run -d windows

# Linux
flutter run -d linux
```

#### ì›¹
```bash
flutter run -d chrome
```

## ğŸ§ª í…ŒìŠ¤íŠ¸

### ì „ì²´ í…ŒìŠ¤íŠ¸ ì‹¤í–‰
```bash
flutter test
```

### íŠ¹ì • í…ŒìŠ¤íŠ¸ íŒŒì¼ ì‹¤í–‰
```bash
# ê²Œì„ ë¡œì§ í…ŒìŠ¤íŠ¸
flutter test test/game_state_manager_test.dart

# íŒ¨í„´ í…ŒìŠ¤íŠ¸
flutter test test/tetromino_patterns_test.dart

# Entity/Model ë³€í™˜ í…ŒìŠ¤íŠ¸
flutter test test/entity_model_test.dart
```

### í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€
í˜„ì¬ **32ê°œì˜ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤**ê°€ ëª¨ë‘ í†µê³¼í•©ë‹ˆë‹¤:
- âœ… GameStateManager í…ŒìŠ¤íŠ¸ (20ê°œ)
- âœ… TetrominoPatterns í…ŒìŠ¤íŠ¸ (5ê°œ)
- âœ… Entity/Model ë³€í™˜ í…ŒìŠ¤íŠ¸ (6ê°œ)
- âœ… Widget í…ŒìŠ¤íŠ¸ (1ê°œ)

## ğŸ® ê²Œì„ í”Œë ˆì´

### ì¡°ì‘ ë°©ë²•

#### í‚¤ë³´ë“œ (ë°ìŠ¤í¬í†±)
- **â† â†’**: ë¸”ë¡ ì¢Œìš° ì´ë™
- **â†“**: ë¸”ë¡ ë¹ ë¥´ê²Œ ë‚™í•˜
- **â†‘ / W**: ë¸”ë¡ íšŒì „
- **ìŠ¤í˜ì´ìŠ¤**: í•˜ë“œ ë“œë¡­ (ì¦‰ì‹œ ë‚™í•˜)
- **P**: ì¼ì‹œì •ì§€

#### í„°ì¹˜/ë§ˆìš°ìŠ¤ (ëª¨ë°”ì¼/ì›¹)
- í™”ë©´ í•˜ë‹¨ì˜ ì»¨íŠ¸ë¡¤ ë²„íŠ¼ ì‚¬ìš©
  - ì¢Œìš° í™”ì‚´í‘œ: ì´ë™
  - íšŒì „ ë²„íŠ¼: íšŒì „
  - ì•„ë˜ í™”ì‚´í‘œ: ë¹ ë¥¸ ë‚™í•˜
  - ì¼ì‹œì •ì§€ ë²„íŠ¼: ì¼ì‹œì •ì§€/ì¬ê°œ
  - ë¦¬ì…‹ ë²„íŠ¼: ê²Œì„ ì¬ì‹œì‘

### ì ìˆ˜ ì‹œìŠ¤í…œ

- **1ì¤„ í´ë¦¬ì–´**: 100 Ã— ë ˆë²¨
- **2ì¤„ í´ë¦¬ì–´**: 300 Ã— ë ˆë²¨
- **3ì¤„ í´ë¦¬ì–´**: 500 Ã— ë ˆë²¨
- **4ì¤„ í´ë¦¬ì–´**: 800 Ã— ë ˆë²¨ (í…ŒíŠ¸ë¦¬ìŠ¤)
- **í•˜ë“œ ë“œë¡­**: +2ì  (ë¸”ë¡ë‹¹)

### ë ˆë²¨ ì‹œìŠ¤í…œ

- 10ì¤„ì„ í´ë¦¬ì–´í•  ë•Œë§ˆë‹¤ ë ˆë²¨ì´ 1ì”© ì¦ê°€
- ë ˆë²¨ì´ ì˜¬ë¼ê°ˆìˆ˜ë¡ ë¸”ë¡ ë‚™í•˜ ì†ë„ê°€ ë¹¨ë¼ì§
- ë‚™í•˜ ì†ë„: `1.0 - (ë ˆë²¨ - 1) Ã— 0.05` ì´ˆ (ìµœì†Œ 0.1ì´ˆ)

## ğŸ’» ê°œë°œ ê°€ì´ë“œ

### ìƒˆë¡œìš´ ê¸°ëŠ¥ ì¶”ê°€

1. **Domain Layerì— Entity ì¶”ê°€**
   ```dart
   // lib/domain/entities/new_entity.dart
   class NewEntity extends Equatable { ... }
   ```

2. **Repository Interfaceì— ë©”ì„œë“œ ì¶”ê°€**
   ```dart
   // lib/domain/repositories/game_repository.dart
   Future<void> newMethod();
   ```

3. **Use Case ìƒì„±**
   ```dart
   // lib/domain/usecases/new_usecase.dart
   class NewUseCase { ... }
   ```

4. **Data Layerì— Model ì¶”ê°€**
   ```dart
   // lib/data/models/new_model.dart
   @HiveType(typeId: X)
   class NewModel extends HiveObject { ... }
   ```

5. **Repository Implementation êµ¬í˜„**
   ```dart
   // lib/data/repositories/game_repository_impl.dart
   @override
   Future<void> newMethod() async { ... }
   ```

6. **Presentation Layerì—ì„œ ì‚¬ìš©**
   ```dart
   // Use Caseë¥¼ Managerë‚˜ Widgetì—ì„œ í˜¸ì¶œ
   ```

### ì½”ë“œ ìƒì„±

Hive ëª¨ë¸ì„ ìˆ˜ì •í•œ í›„:
```bash
flutter pub run build_runner build --delete-conflicting-outputs
```

### ì˜ì¡´ì„± ì£¼ì…

ìƒˆë¡œìš´ ì˜ì¡´ì„±ì„ ì¶”ê°€í•˜ë ¤ë©´ `lib/core/di/service_locator.dart`ì— ë“±ë¡:
```dart
sl.registerLazySingleton<NewService>(() => NewServiceImpl());
```

## ğŸ“š ì°¸ê³  ìë£Œ

- [Flame ê³µì‹ ë¬¸ì„œ](https://docs.flame-engine.org/)
- [Flutter ê³µì‹ ë¬¸ì„œ](https://docs.flutter.dev/)
- [Hive ë¬¸ì„œ](https://docs.hivedb.dev/)
- [í´ë¦° ì•„í‚¤í…ì²˜ ê°€ì´ë“œ](./FLAME_GAME_GUIDE.md)

## ğŸ› ì•Œë ¤ì§„ ì´ìŠˆ

í˜„ì¬ ì•Œë ¤ì§„ ì´ìŠˆëŠ” ì—†ìŠµë‹ˆë‹¤.

## ğŸ”® í–¥í›„ ê³„íš

- [ ] ë©€í‹°í”Œë ˆì´ì–´ ëª¨ë“œ
- [ ] ë¦¬í”Œë ˆì´ ê¸°ëŠ¥
- [ ] ë‹¤ì–‘í•œ ê²Œì„ ëª¨ë“œ
- [ ] ì‚¬ìš´ë“œ íš¨ê³¼ ë° ë°°ê²½ìŒì•…
- [ ] ì• ë‹ˆë©”ì´ì…˜ ê°œì„ 
- [ ] ë¦¬ë”ë³´ë“œ ì‹œìŠ¤í…œ

## ğŸ“„ ë¼ì´ì„ ìŠ¤

ì´ í”„ë¡œì íŠ¸ëŠ” ê°œì¸ í•™ìŠµ ë° í¬íŠ¸í´ë¦¬ì˜¤ ëª©ì ìœ¼ë¡œ ì œì‘ë˜ì—ˆìŠµë‹ˆë‹¤.

## ğŸ‘¨â€ğŸ’» ê°œë°œì

í”„ë¡œì íŠ¸ ê°œë°œ ë° ìœ ì§€ë³´ìˆ˜

---

**ì¦ê±°ìš´ ê²Œì„ ë˜ì„¸ìš”! ğŸ®**
